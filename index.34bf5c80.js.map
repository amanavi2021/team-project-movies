{"mappings":"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","sources":["src/index.js","src/js/pagination.js"],"sourcesContent":["// import pageHeaderAutoSize from './js/service/pageheaderautosize';\nimport { mask } from './js/loader';\nimport { paginationFeach } from './js/pagination';\nimport * as teamModal from './js/team-members';\nimport toggleModal from './js/modal';\nimport searchByName from './js/searchByName';\nimport theme from './js/theme';\nimport addToQueueOrWatched from './js/add-to-queue-or-watched'\nimport languageApi from './js/language-changer'\n// pageHeaderAutoSize()\n// toggleModal();\n\npaginationFeach();\n","import * as paginationFunctions from './pagination-functions';\nimport onLoad from './onLoad';\nimport apiService from './apiService';\nimport localstorage from './service/localstorage';\n\nconst NUMBER_PAGINATION = 5;\nconst cardContainerEl = document.querySelector('.gallery');\nconst paginationEl = document.querySelector('.pagination__box');\nconst paginationContainerEl = document.querySelector('.pagination__container')\nconst formRef = document.querySelector('#search-form');\n\nfunction getFilmsFromStoradge() {\n    const savedFilms = localStorage.getItem('currentFilms') || {};\n    try {\n        const parsedSavedFilms = JSON.parse(savedFilms);\n        const pageNumber = parsedSavedFilms.total_pages;\n\n        return pageNumber;\n    } catch {\n        console.log('nothing');\n    }\n}\n\nexport async function paginationFeach() {\n\n    const totalPages = getFilmsFromStoradge();\n    \n    await onLoad(); \n    \n    if (totalPages <= NUMBER_PAGINATION + 2 && totalPages >= 1) {\n\n        paginationFunctions.displayPaginationSmall(totalPages, paginationEl);\n        document.querySelector('.js-page-1').classList.add('pagination__item--select');\n\n         if (totalPages === 1) {\n                paginationFunctions.clearPagination(paginationEl);\n         }\n        \n        paginationEl.addEventListener('click', onPaginationBtnClick);\n        formRef.addEventListener('submit', onFormClickSmall);\n\n        function onFormClickSmall() {\n            paginationEl.removeEventListener('click', onPaginationBtnClick);\n            paginationContainerEl.removeEventListener('click', onPaginationClick);\n        }\n        return;\n    }\n\n    paginationEl.innerHTML = '';\n    \n    paginationFunctions.displayPaginationBig(totalPages, paginationContainerEl, paginationEl);\n    document.querySelector('.js-page-1').classList.add('pagination__item--select');\n\n    const btnLeft = document.querySelector('.pagination__btnLeft');\n    const btnRight = document.querySelector('.pagination__btnRight');\n\n    btnLeft.disabled = true;\n\n    paginationContainerEl.addEventListener('click', onPaginationClick);\n\n    function onPaginationClick (e) {\n        e.preventDefault();\n\n        if (!e.target.classList.contains('pagination__item') && !e.target.classList.contains('pagination__btnLeft') && !e.target.classList.contains('pagination__btnRight') ) {\n            return;\n        };\n        \n        if (e.target.classList.contains('pagination__item')) {\n             const currentPage = Number(e.target.textContent);        \n        \n            onBigPaginationBtnClickrRenderFilms(currentPage);\n            onBigPaginationBtnClickrRenderPagination(totalPages, currentPage); \n\n            paginationFunctions.activityArrows(currentPage, totalPages);\n        }\n\n        if (e.target.classList.contains('pagination__btnLeft')) {\n               \n            const activePage = document.querySelector('.pagination__item--select');\n            const activePageNumber = Number(activePage.textContent);\n            const previousPage = activePageNumber - 1;\n\n            onBigPaginationBtnClickrRenderFilms(previousPage);\n            onBigPaginationBtnClickrRenderPagination(totalPages, previousPage); \n            \n            paginationFunctions.activityOfLeftArrow(1);\n            }\n\n        if (e.target.classList.contains('pagination__btnRight')) {\n             \n            const activePage = document.querySelector('.pagination__item--select');\n            const activePageNumber = Number(activePage.textContent); \n            const nextPage = activePageNumber + 1;\n\n            onBigPaginationBtnClickrRenderFilms(nextPage);\n            onBigPaginationBtnClickrRenderPagination(totalPages, nextPage);    \n            \n            paginationFunctions.activityOfRightArrow(totalPages);\n        }\n    }\n\n    formRef.addEventListener('submit', onFormClick);\n\n    function onFormClick() {\n        paginationContainerEl.removeEventListener('click', onPaginationClick);\n        paginationEl.removeEventListener('click', onPaginationBtnClick);\n    }\n}\n\nfunction onBigPaginationBtnClickrRenderPagination(totalPages, currentPage) {\n    paginationFunctions.clearPagination(paginationEl);\n\n    const n = NUMBER_PAGINATION - (Math.ceil(NUMBER_PAGINATION / 3) - 2);\n    const m = totalPages - (NUMBER_PAGINATION - 1);\n\n\n    if (currentPage < n) {\n        paginationFunctions.displayPaginationBig(totalPages, paginationContainerEl, paginationEl);\n    } else if (currentPage >= n && currentPage <= m) {\n        paginationFunctions.displayPaginationBigMiddle(totalPages, currentPage, paginationContainerEl, paginationEl);\n    } else {\n        paginationFunctions.displayPaginationBigFinish(totalPages, paginationContainerEl, paginationEl);\n    }\n\n    document.querySelector(`.js-page-${currentPage}`)?.classList.add('pagination__item--select');\n}\n\nasync function onBigPaginationBtnClickrRenderFilms(currentPage) {\n    cardContainerEl.innerHTML = '';\n    apiService.pageNumber = currentPage;\n    await onLoad();\n}\n\n\nasync function onPaginationBtnClick(e) {\n    if (!e.target.classList.contains('pagination__item')) {\n        return;\n    }\n    cardContainerEl.innerHTML = '';\n    apiService.pageNumber = Number(e.target.textContent);\n\n    await onLoad();\n\n    document.querySelector(`.js-page-${currentPage}`).classList.add('pagination__item--select');\n}   \n\n\n\n"],"names":["parcelRequire","$bpxeT","$dfaf77c789ce7a24$var$cardContainerEl","document","querySelector","$dfaf77c789ce7a24$var$paginationEl","$dfaf77c789ce7a24$var$paginationContainerEl","$dfaf77c789ce7a24$var$formRef","$dfaf77c789ce7a24$var$getFilmsFromStoradge","savedFilms","localStorage","getItem","JSON","parse","total_pages","e","console","log","$dfaf77c789ce7a24$var$_paginationFeach","$parcel$interopDefault","$2TvXO","mark","_callee","totalPages","onFormClickSmall","btnLeft","onPaginationClick","onFormClick","removeEventListener","$dfaf77c789ce7a24$var$onPaginationBtnClick","preventDefault","target","classList","contains","currentPage","Number","textContent","$dfaf77c789ce7a24$var$onBigPaginationBtnClickrRenderFilms","$dfaf77c789ce7a24$var$onBigPaginationBtnClickrRenderPagination","$fdkM5","activityArrows","activePage","previousPage","activityOfLeftArrow","activePage1","nextPage","activityOfRightArrow","$9JQa4","default","$dfaf77c789ce7a24$var$NUMBER_PAGINATION","displayPaginationSmall","add","clearPagination","addEventListener","innerHTML","displayPaginationBig","disabled","apply","this","arguments","ref","n","Math","ceil","m","displayPaginationBigMiddle","displayPaginationBigFinish","concat","$dfaf77c789ce7a24$var$_onBigPaginationBtnClickrRenderFilms","$dh4R1","pageNumber","$dfaf77c789ce7a24$var$_onPaginationBtnClick"],"version":3,"file":"index.34bf5c80.js.map"}